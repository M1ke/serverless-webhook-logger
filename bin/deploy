#!/bin/bash

bucket="YOUR_BUCKET_HERE"
stack="webhook-logger"

sam package \
    --output-template-file .stack.yaml \
    --s3-bucket $bucket

sam deploy \
    --template-file .stack.yaml \
    --capabilities CAPABILITY_IAM \
    --stack-name "$stack"

aws cloudformation describe-stacks --stack-name "$stack" \
    --query 'Stacks[0].Outputs[?OutputKey==`Url`].OutputValue' \
    --output text
